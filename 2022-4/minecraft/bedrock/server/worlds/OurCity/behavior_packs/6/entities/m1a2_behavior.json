/*

	Hello, dear fellow reverse engineers :D

	You can tear this addon apart 
	and rip the parts off 
	and make it your own, 
	please just make sure 
	you give me the proper credits.
	Thank you.

	- MyoHtet @bmheades

*/

{
	"format_version": "1.13.0", //1.13.0
	"minecraft:entity": {
		"description": {
			"identifier": "bm:m1a2",
			"is_spawnable": true,
			"is_summonable": true,
			"is_experimental": false,
			"scripts": {
				"animate": [
				"start", "iron_man_effect", "tell"
				]
			},
			"animations": {
				"start": "controller.animation.m1a2_drivef",
				"iron_man_effect": "controller.animation.ironmaneffect",
				"tell": "controller.animation.welcome"
			}
		},
		"component_groups": {
		
		
			"tank:driving0": {
				"minecraft:skin_id": {
					"value": 0
				}
			},
			"tank:driving1": {
				"minecraft:skin_id": {
					"value": 1
				}
			},
			
			// machine gun
			
			"machinegun:ready": {
				"minecraft:mark_variant": {
					"value": 0
				},
				
				"minecraft:damage_sensor": {
					"triggers": [
					{
						"on_damage": {
							"filters": {
								"test": "is_riding",
								"subject": "other",
								"value": true
							},
							"event": "machinegun:shoot"
						},
						"deals_damage": false
					},
					{
					"cause": "fall",
					"deals_damage": false
					},
					{
					"cause": "contact",
					"deals_damage": false
					}	
					]
				}
			},
			"machinegun:shooting": {
				"minecraft:mark_variant": {
					"value": 1
				},
				"minecraft:damage_sensor": {
					"triggers": [
					{
						"on_damage": {
							"filters": {
								"test": "is_riding",
								"subject": "other",
								"value": true
							}
						},
						"deals_damage": false
					},
					{
					"cause": "fall",
					"deals_damage": false
					},
					{
					"cause": "contact",
					"deals_damage": false
					}
					]
				},
				"minecraft:spawn_entity": [{
					"min_wait_time": 0.6,
					"max_wait_time": 0.6,
					"single_use": false,
					"spawn_entity": "bm:machine_gun_bullet",
					"num_to_spawn": 1
					//"spawn_sound": "explode"
				}],
				"minecraft:timer": {
					"time": 0.3,
					"looping": true,
					"time_down_event": {
						"event": "machinegun:ready",
						"target": "self"
					}
				}
			},
			
			// main gun 
			
			"maingun:ready": {
				
				"minecraft:interact": {
				"interactions": {
				"on_interact": {
				"filters": {
								"test": "is_riding",
								"subject": "other",
								"value": true
							},
				"event": "maingun:shoot_animation_start",
				"target": "self" 
				}, 
				"cooldown": 2,
				"use_item": false,
				//"play_sounds": "explode",
				"spawn_entities": "bm:tank_shell",
				"interact_text": "action.interact.creeper"
				}
			}
			},
			"maingun:shoot_animation_start": {				
				"minecraft:variant": {
					"value": 1
				},
				"minecraft:timer": {
					"time": 0.3,
					"looping": true,
					"time_down_event": {
						"event": "maingun:shoot_animation_end",
						"target": "self"
					}
				}
			},
			"maingun:shoot_animation_end": {
				"minecraft:variant": {
					"value": 0
				}
			}			
		},
		"components": {
			"minecraft:rideable": {
				"priority": 0,
				"seat_count": 1,
				"rider_can_interact": true,
				"controlling_seat": 0,
				"crouching_skip_interact": true,
				"family_types": [
					"player"
				],
				"interact_text": "Let's move out!",
				"seats": [
					{
						"position": [0, 0.6, 0.3]
					}
				]
			},
			"minecraft:damage_sensor": {
				"triggers": [
				{
					"on_damage": {
						"filters": {
							"test": "is_riding",
							"subject": "other",
							"value": true
						}
					},
					"deals_damage": false
				},
				{
					"cause": "fall",
					"deals_damage": false
				},
				{
					"cause": "contact",
					"deals_damage": false
				}
				]
			},
			"minecraft:type_family": {
				"family": [
					"vehicles"
				]
			},
			"minecraft:collision_box": {
				"width": 2.3,
				"height": 2.8

			},
			
				
			"minecraft:scale": {
				"value": 1.3
			},
			"minecraft:push_through": {
				"value": 1
			},
			"minecraft:health": {
				"value": {
					"range_min": 80,
					"range_max": 80
				}
			},
			"minecraft:break_blocks": {

				"breakable_blocks": [
		"bamboo",
		"cactus",
		"minecraft:leaves",
		"turtle_egg",
		"waterlily",
		"minecraft:planks",
		"minecraft:log",
		"minecraft:hay_block", 
		
		"minecraft:wheat",
		"minecraft:potatoes",
		"minecraft:carrots", 

		"minecraft:beetroot",
		"minecraft:melon_block",
		"minecraft:pumpkin",  
	
		"minecraft:sweet_berry_bush",
		"minecraft:cake",
		"minecraft:brown_mushroom",
		"minecraft:red_mushroom",
		"minecraft:fence",
		"minecraft:wooden_door",
		"minecraft:glass",
		"minecraft:glass_pane",
		"minecraft:stained_glass",
		"minecraft:stained_glass_pane",
		"minecraft:wooden_slab"
				]
			},
			"minecraft:navigation.walk": {
				"can_float": false
			},
			"minecraft:jump.static": {},


			"minecraft:input_ground_controlled": {},
			"minecraft:nameable": {},
			"minecraft:movement": {
				"value": 0.19
			},
			"minecraft:underwater_movement": {
				"value": 0.07
			},
			"minecraft:is_stackable": {},
			"minecraft:knockback_resistance": {
				"value": 1
			},
			"minecraft:healable": {
				"items": [{
					"item": "iron_ingot",
					"heal_amount": 4
				}]
			},

			"minecraft:physics": {},
			"minecraft:can_climb": {},
			"minecraft:fire_immune": {},
			"minecraft:movement.basic": {},
			"minecraft:pushable": {
				"is_pushable": false,
				"is_pushable_by_piston": true
			}
		},
		"events": {
			"minecraft:entity_spawned": {
				"add": {
					"component_groups": [
						"maingun:ready",
						"machinegun:ready"
					]
				}
			},
			
			// machine gun
				
			"machinegun:shoot": {
				"add": {
					"component_groups": [
						"machinegun:shooting"
					]
				},
				"remove": {
					"component_groups": [
						"machinegun:ready"
					]
				}
			},
			"machinegun:ready": {
				"add": {
					"component_groups": [
						"machinegun:ready"
					]
				},
				"remove": {
					"component_groups": [
						"machinegun:shooting"
					]
				}
			},
			
			// 	For driving chain animation	
			
			"tank:not_driving": {			
				"remove": {
					"component_groups": [
						"tank:driving0",
						"tank:driving1"
					]
				}
			},
			"tank:drive0": {
				"add": {
					"component_groups": [
						"tank:driving0"
					]
				},
				"remove": {
					"component_groups": [
						"tank:driving1"
					]
				}
			},
			"tank:drive1": {
				"add": {
					"component_groups": [
						"tank:driving1"
					]
				},
				"remove": {
					"component_groups": [
						"tank:driving0"
					]
				}
			},
			
			// main gun 
			
		
			"maingun:shoot_animation_start": {
				"add": {
					"component_groups": [
						"maingun:shoot_animation_start"
					]
				},
				"remove": {
					"component_groups": [
						"maingun:shoot_animation_end"
					]
				}
			},
			"maingun:shoot_animation_end": {
				"add": {
					"component_groups": [
						"maingun:shoot_animation_end",
						"machinegun:ready"
					]
				},
				"remove": {
					"component_groups": [
						"maingun:shoot_animation_start",
						"machinegun:shooting"
					]
				}
			}
		}
	}
}